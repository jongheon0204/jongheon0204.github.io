I"è:<p><img width="100%" alt="baekjoon17135" src="https://user-images.githubusercontent.com/17156386/76851539-c6e79f80-688c-11ea-8724-c36bbd0dff88.png" /></p>

<p>N X M ê²©ìíŒì— ì ë“¤ì´ ì¡´ì¬í•˜ê³  ì„±ì„ ì§€í‚¤ëŠ” ê¶ìˆ˜ 3ëª…ì´ ì¡´ì¬í•  ë•Œ, í•œ í„´ì— ì ë“¤ì€ í•œ ì¹¸ì”© ì´ë™í•˜ê³  ê¶ìˆ˜ë“¤ì€ 1ëª…ì”© ì ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.
<br />ì´ë•Œ, ê¶ìˆ˜ë“¤ì„ ì ì ˆíˆ ë°°ì¹˜í•˜ì—¬ ìµœëŒ€ë¡œ ì œê±°í•  ìˆ˜ ìˆëŠ” ì ì˜ ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤.</p>

<ul>
  <li>ê²©ìì˜ í¬ê¸°ë²”ìœ„ëŠ” 3&lt;= N,M &lt;=15 ì´ê¸° ë•Œë¬¸ì— ê¶ìˆ˜ì˜ ë°°ì¹˜ëŠ” ì™„ì „íƒìƒ‰ìœ¼ë¡œ ê²€ì‚¬í•´ë„ ëœë‹¤.</li>
  <li>M í¬ê¸°ì˜ ë°°ì—´ì— ê¶ìˆ˜ì˜ ìœ„ì¹˜ë¥¼ 1ë¡œ ì €ì¥í›„, next_permutationì„ ì´ìš©í•˜ì—¬ ì™„ì „íƒìƒ‰.</li>
  <li>2ì°¨ì› ë°°ì—´ì„ ë§Œë“¤ì–´ í•œ í„´ë§ˆë‹¤ ì œê±°í•  ì ì„ ì°¾ëŠ” ë°©ë²•, ì ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ë”°ë¡œ ì €ì¥í•œ í›„ í•œ í„´ë§ˆë‹¤ ì œê±°í•´ ë‚˜ê°€ëŠ” ë°©ë²•ì´ ì¡´ì¬.</li>
  <li>ì—¬ê¸°ì„œëŠ” ì ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ë”°ë¡œ ì €ì¥í•œ í›„ ì œê±°í•´ ë‚˜ê°€ëŠ” ë°©ë²•ì„ ì´ìš©.</li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;queue&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#define x first
#define y second
#define pii pair&lt;int,int&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// ê¶ìˆ˜ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ì €ì¥í•  ë°°ì—´</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">archer</span><span class="p">;</span>
<span class="c1">// ì ì˜ ìœ„ì¹˜ë¥¼ ì €ì¥í•  ë°°ì—´</span>
<span class="n">queue</span><span class="o">&lt;</span><span class="n">pii</span><span class="o">&gt;</span> <span class="n">enemy_position</span><span class="p">;</span>

<span class="c1">// ë‘ ìœ„ì¹˜ ì •ë³´ì˜ ê±°ë¦¬ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜</span>
<span class="kt">int</span> <span class="nf">getDis</span><span class="p">(</span><span class="n">pii</span> <span class="n">a</span><span class="p">,</span><span class="n">pii</span> <span class="n">b</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">abs</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">abs</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ì ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ì „ë‹¬í•´ ì£¼ë©´ ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰</span>
<span class="kt">void</span> <span class="nf">Defence</span><span class="p">(</span><span class="n">queue</span><span class="o">&lt;</span><span class="n">pii</span><span class="o">&gt;</span> <span class="n">enemy</span><span class="p">){</span>
	<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="c1">// ê¶ìˆ˜ì˜ ì¢Œí‘œë¥¼ ì €ì¥</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="n">pii</span><span class="o">&gt;</span> <span class="n">bow</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">archer</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="n">archer</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">bow</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_pair</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">i</span><span class="p">));</span>
	<span class="p">}</span>
	<span class="c1">// ì ì´ ëª¨ë‘ ì—†ì–´ì§ˆ ë•Œ ê¹Œì§€(ì„±ì•ˆì— ë“¤ì–´ì˜¤ê±°ë‚˜, ê¶ìˆ˜ì—ê²Œ ì œê±°ë˜ê±°ë‚˜)	</span>
	<span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">enemy</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
		<span class="n">pii</span> <span class="n">kill</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">enemy</span><span class="p">.</span><span class="n">front</span><span class="p">(),</span><span class="n">enemy</span><span class="p">.</span><span class="n">front</span><span class="p">(),</span><span class="n">enemy</span><span class="p">.</span><span class="n">front</span><span class="p">()};</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">enemy</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
			<span class="n">pii</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">enemy</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">enemy</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
			<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
				<span class="kt">int</span> <span class="n">aDis</span> <span class="o">=</span> <span class="n">getDis</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span><span class="n">bow</span><span class="p">[</span><span class="n">j</span><span class="p">]),</span> <span class="n">bDis</span> <span class="o">=</span> <span class="n">getDis</span><span class="p">(</span><span class="n">kill</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">bow</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
				<span class="k">if</span><span class="p">(</span><span class="n">aDis</span> <span class="o">&lt;</span> <span class="n">bDis</span><span class="p">){</span>
					<span class="n">kill</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
				<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">aDis</span> <span class="o">==</span> <span class="n">bDis</span> <span class="o">&amp;&amp;</span> <span class="n">cur</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">kill</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">){</span>
					<span class="n">kill</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="n">enemy</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="c1">// ê° ê¶ìˆ˜ì— ê°€ì¥ ê°€ê¹Œìš°ë©´ì„œ ê±°ë¦¬ì— ë“¤ì–´ì˜¤ëŠ” ì ì„ ì œê±°í•œë‹¤.</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">len</span> <span class="o">=</span> <span class="n">enemy</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
			<span class="n">pii</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">enemy</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">enemy</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
			<span class="kt">bool</span> <span class="n">isDead</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
			<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
				<span class="k">if</span><span class="p">(</span><span class="n">kill</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">cur</span> <span class="o">&amp;&amp;</span> <span class="n">getDis</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span><span class="n">bow</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">d</span><span class="p">){</span>
					<span class="n">num</span><span class="o">++</span><span class="p">;</span> <span class="n">isDead</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">isDead</span> <span class="o">&amp;&amp;</span> <span class="n">cur</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span> <span class="n">enemy</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">make_pair</span><span class="p">(</span><span class="n">cur</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">cur</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">ans</span><span class="p">,</span><span class="n">num</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
	<span class="n">ios_base</span><span class="o">::</span><span class="n">sync_with_stdio</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span> <span class="n">cin</span><span class="p">.</span><span class="n">tie</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">m</span><span class="o">&gt;&gt;</span><span class="n">d</span><span class="p">;</span> 
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">a</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
			<span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="p">;</span> <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">enemy_position</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">make_pair</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="c1">// ê¶ìˆ˜ì˜ ìœ„ì¹˜ ì •ë³´ëŠ” 1ë¡œ í‘œì‹œëœë‹¤.</span>
	<span class="n">archer</span> <span class="o">=</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="o">-</span><span class="mi">3</span><span class="p">);</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">archer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="c1">// next_permutationì„ ì´ìš©í•˜ì—¬ í•˜ë‚˜ì”© ê²€ì‚¬</span>
	<span class="k">do</span><span class="p">{</span>
		<span class="n">Defence</span><span class="p">(</span><span class="n">enemy_position</span><span class="p">);</span>
	<span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">next_permutation</span><span class="p">(</span><span class="n">archer</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">archer</span><span class="p">.</span><span class="n">end</span><span class="p">()));</span>
	
	<span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
:ET